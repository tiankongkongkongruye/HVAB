## 目标
- 改进增强质量与指标：在论文逻辑框架内，实现可学习门控融合、增强 GLC 输出头，并使 CM‑FSC 的频率目标更贴近论文公式；同时暴露曝光均值参数以便调亮。

## 修改文件与内容
- main_Net.py
  - 新增参数：`--exp_mean`（默认 0.6），用于 `L_exp(48, opt.exp_mean)`。
  - 在 `train()` 中使用该曝光均值创建 `l_e`。

- net/lformer_Net.py
  - 增强 GLC 输出头：用轻量解码器将融合特征映射到 3 通道图像
    - `to_rgb = nn.Sequential(Conv(16→32), ReLU, Conv(32→16), ReLU, Conv(16→3), Sigmoid)`。
  - 学习式门控融合（hybrid 模式）
    - 新增 `gating_net = nn.Sequential(Conv(3+3→16), ReLU, Conv(16→1), Sigmoid)`；输入为 `torch.cat([L, feat_to_img], dim=1)`（L 是 3 通道，feat_to_img 是 3 通道）。
    - 前向：`gate = gating_net(torch.cat([L, feat_to_img], dim=1))`，`I = gate * retinex_output + (1 - gate) * feat_to_img`。
    - full 模式保持 `I = inverse_crf(feat_to_img)`；den_phy/cm fsc 模式不变。
  - CM‑FSC 频率目标：为每层增加 `T_layers[j] = nn.Linear(embedding_dim, feature_dim)`；由 `e_j` 生成 `F_j^clip` 并广播至 `[B, C, H, W]`，缓存到 `clip_targets` 用于 `freq_loss`。

- utils_Net.py
  - 保持 `freq_loss` 支持列表输入；适配新 `clip_targets`（形状与 `modulated_features` 一致）。

## 验证与兼容
- 保持现有 CLI 与模式；只新增 `--exp_mean`。
- 训练命令与评估路径不变；增强图仍保存到 `results/val_I/`。

## 预期
- 更亮且结构更清晰；SSIM/LPIPS 随阶段继续改善；与论文方法一致（组件与损失不变）。